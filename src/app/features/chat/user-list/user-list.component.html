<!-- src/app/features/chat/user-list/user-list.component.html -->
<div class="user-list-container">
  <div class="user-list-header">
    <h2>Start a Conversation</h2>
    <button class="btn-close" (click)="onCancel()">&times;</button>
  </div>

  <!-- Search Bar -->
  <div class="search-section">
    <input
      type="text"
      class="search-input"
      [(ngModel)]="searchQuery"
      (input)="onSearchInput($event)"
      placeholder="Search by name or email..."
      [disabled]="creating"
    />
  </div>

  @if (errorMessage) {
    <div class="alert-danger">
      {{ errorMessage }}
    </div>
  }

  <!-- Loading State -->
  @if (loading) {
    <div class="loading-container">
      <div class="spinner-large"></div>
      <p>Loading users...</p>
    </div>
  }

  <!-- Empty State -->
  @if (!loading && filteredUsers.length === 0) {
    <div class="empty-state">
      <div class="empty-icon">ðŸ‘¥</div>
      <h3>No users found</h3>
      @if (searchQuery) {
        <p>Try adjusting your search</p>
      } @else {
        <p>No other users available</p>
      }
    </div>
  }

  <!-- User List -->
  @if (!loading && filteredUsers.length > 0) {
    <div class="users-list">
      @for (user of filteredUsers; track user.ID) {
        <div 
          class="user-item" 
          (click)="createDirectChat(user.ID)"
          [class.disabled]="creating"
        >
          <div class="user-avatar-wrapper">
            <div class="user-avatar">
              {{ (user.username || user.email).charAt(0).toUpperCase() }}
            </div>
          </div>
          <div class="user-info">
            <div class="user-name">{{ user.username }}</div>
           
          </div>
          <div class="user-action">
            @if (creating) {
              <span class="action-spinner"></span>
            }
          </div>
        </div>
      }
    </div>
  }
</div>
